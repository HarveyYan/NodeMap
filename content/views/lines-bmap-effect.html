<!DOCTYPE HTML>
<html style="height: 100%">
   <head>
       <meta charset="utf-8">
       <script src="http://222.85.139.245:64154/jquery-1.7.2.min.js" type="text/javascript"></script>
   </head>
   <body style="height: 100%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts-all-3.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=AoXg4xaOZP1RRzoSGPayoHlSvvaVs8tp"></script>
       <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
       <script type="text/javascript">

        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var app = {};
        option = null;
        app.title = '北京公交路线 - 线特效';

        $.get('http://222.85.139.245:64154/6-10.json', function(data) {
            var hStep = 300 / (data.length - 1);
            var busLines = [].concat.apply([], data.map(function (busLine, idx) {
                var prevPt;
                var points = [];
               // var col=busLine[0];


                for (var i = 0; i < busLine.length; i += 2) {
                    var pt = [busLine[i], busLine[i + 1]];



                    points.push([pt[1] / 1e4, pt[0] / 1e4]);
                }
                return {
                    coords: points,
                    lineStyle: {//Math.round(${color[idx]})
                        normal: {
                            color: echarts.color.modifyHSL('#5A94DF', Math.ceil(Math.random()*100))
                        }
                    },
                   // effect: {
                  //      constantSpeed: Math.ceil(Math.random()*100),
                  //  }
                };
            }));
            myChart.setOption(option = {
                bmap: {
                    center: [ 106.64691496995094,26.635041004519582],
                    zoom: 10,
                    roam: true,
                    mapStyle: {
                      'styleJson': [
                        {
                          'featureType': 'water',
                          'elementType': 'all',
                          'stylers': {
                            'color': '#031628'
                          }
                        },
                        {
                          'featureType': 'land',
                          'elementType': 'geometry',
                          'stylers': {
                            'color': '#000102'
                          }
                        },
                        {
                          'featureType': 'highway',
                          'elementType': 'all',
                          'stylers': {
                            'visibility': 'off'
                          }
                        },
                        {
                          'featureType': 'arterial',
                          'elementType': 'geometry.fill',
                          'stylers': {
                            'color': '#000000'
                          }
                        },
                        {
                          'featureType': 'arterial',
                          'elementType': 'geometry.stroke',
                          'stylers': {
                            'color': '#0b3d51'
                          }
                        },
                        {
                          'featureType': 'local',
                          'elementType': 'geometry',
                          'stylers': {
                            'color': '#000000'
                          }
                        },
                        {
                          'featureType': 'railway',
                          'elementType': 'geometry.fill',
                          'stylers': {
                            'color': '#000000'
                          }
                        },
                        {
                          'featureType': 'railway',
                          'elementType': 'geometry.stroke',
                          'stylers': {
                            'color': '#08304b'
                          }
                        },
                        {
                          'featureType': 'subway',
                          'elementType': 'geometry',
                          'stylers': {
                            'lightness': -70
                          }
                        },
                        {
                          'featureType': 'building',
                          'elementType': 'geometry.fill',
                          'stylers': {
                            'color': '#000000'
                          }
                        },
                        {
                          'featureType': 'all',
                          'elementType': 'labels.text.fill',
                          'stylers': {
                            'color': '#857f7f'
                          }
                        },
                        {
                          'featureType': 'all',
                          'elementType': 'labels.text.stroke',
                          'stylers': {
                            'color': '#000000'
                          }
                        },
                        {
                          'featureType': 'building',
                          'elementType': 'geometry',
                          'stylers': {
                            'color': '#022338'
                          }
                        },
                        {
                          'featureType': 'green',
                          'elementType': 'geometry',
                          'stylers': {
                            'color': '#062032'
                          }
                        },
                        {
                          'featureType': 'boundary',
                          'elementType': 'all',
                          'stylers': {
                            'color': '#465b6c'
                          }
                        },
                        {
                          'featureType': 'manmade',
                          'elementType': 'all',
                          'stylers': {
                            'color': '#022338'
                          }
                        },
                        {
                          'featureType': 'label',
                          'elementType': 'all',
                          'stylers': {
                            'visibility': 'off'
                          }
                        }
                      ]
                    }
                },
                series: [{
                    type: 'lines',
                    coordinateSystem: 'bmap',
                    polyline: true,
                    data: busLines,
                    silent: true,
                    lineStyle: {
                        normal: {
                            // color: '#c23531',
                            // color: 'rgb(200, 35, 45)',
                            opacity: 0.2,
                            width: 1
                        }
                    },
                    progressiveThreshold: 500,
                    progressive: 200
                }, {
                    type: 'lines',
                    coordinateSystem: 'bmap',
                    polyline: true,
                    data: busLines,
                    lineStyle: {
                        normal: {
                            width: 0
                        }
                    },
                    effect: {
                        show: true,
                        trailLength: 0.1,
                        symbolSize: 1.5
                    },
                    zlevel: 1
                }]
            });
        });;
        if (option && typeof option === "object") {
            myChart.setOption(option, true);
}
       </script>
   </body>
</html>